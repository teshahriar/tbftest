{% extends "base.html" %}
{% block content %}
<style>
    /* Professional Academic Palette */
    :root { 
        --navy: #1B2631; 
        --paper-white: #FFFFFF;
        --accent-crimson: #922B21; 
        --border-gold: #D4AC0D; 
        --bg-soft: #F4F6F7;
        --input-border: #ABB2B9;
    }
    
    body { background-color: var(--bg-soft); }

    .form-container { 
        max-width: 1050px; 
        margin: 40px auto; 
        background: var(--paper-white); 
        padding: 0; 
        border: 1px solid var(--input-border);
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        border-radius: 8px;
        overflow: hidden;
    }

    /* Header Styling */
    .form-banner {
        background: var(--navy);
        color: white;
        padding: 20px;
        text-align: center;
        border-bottom: 4px solid var(--accent-crimson);
    }
    .form-banner h2 { margin: 0; text-transform: uppercase; letter-spacing: 1px; font-size: 1.5rem; }
    .form-banner p { margin: 5px 0 0; opacity: 0.8; font-size: 0.9rem; }

    .form-content { padding: 40px; }

    /* Structural Grid for Header Fields */
    .header-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
    
    /* Professional Field Boxes */
    .field-box { 
        display: flex; 
        border: 1px solid var(--input-border); 
        background: #fff; 
        height: 42px; 
        transition: all 0.3s;
    }
    .field-box:focus-within { border-color: var(--navy); box-shadow: 0 0 5px rgba(27, 38, 49, 0.2); }
    
    .field-box label { 
        background: var(--navy); 
        color: #fff; 
        padding: 0 15px; 
        min-width: 180px; 
        display: flex; 
        align-items: center; 
        font-size: 12px; 
        font-weight: 600; 
        text-transform: uppercase;
    }
    .field-box input, .field-box select { flex: 1; border: none; padding: 0 12px; outline: none; font-size: 14px; color: #333; }

    /* Category Selection */
    .category-wrapper { display: flex; justify-content: center; margin: 20px 0 30px; }
    .category-card { 
        display: flex; 
        align-items: center; 
        background: #fff; 
        border: 1px solid var(--input-border); 
        padding: 5px 25px;
        border-radius: 50px;
    }

    /* Section Typography */
    .section-title { 
        background: var(--bg-soft);
        color: var(--navy);
        padding: 10px 15px;
        font-weight: 700;
        font-size: 14px;
        text-transform: uppercase;
        border-left: 5px solid var(--accent-crimson);
        margin: 30px 0 15px;
    }

    /* Upload Area Improvements */
    .upload-section { display: grid; grid-template-columns: 1fr 2fr; gap: 20px; margin-top: 30px; }
    .upload-box { 
        background: #fff; 
        border: 2px dashed var(--input-border); 
        padding: 25px; 
        text-align: center; 
        cursor: pointer; 
        border-radius: 5px;
        transition: 0.3s;
    }
    .upload-box:hover { border-color: var(--accent-crimson); background: #fdf2f2; }
    .upload-box strong { display: block; color: var(--navy); font-size: 14px; }
    .size-hint { font-size: 11px; color: var(--accent-crimson); font-weight: bold; }

    /* Submit Button */
    .btn-submit { 
        background: var(--accent-crimson); 
        color: white; 
        padding: 15px 60px; 
        border: none; 
        font-weight: 700; 
        border-radius: 5px; 
        float: right; 
        cursor: pointer;
        text-transform: uppercase;
        transition: 0.3s;
    }
    .btn-submit:hover { background: var(--navy); transform: translateY(-2px); }

    .hidden { display: none; }
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }

    @media (max-width: 768px) {
        .grid-2, .header-grid, .upload-section { grid-template-columns: 1fr; }
        .field-box label { min-width: 130px; font-size: 11px; }
    }
</style>

<div class="form-container">
    <div class="form-banner">
        <h2>Scholarship Registration Form - 2026</h2>
        <p>The Brilliants Foundation, Bogura</p>
    </div>

    <form method="POST" enctype="multipart/form-data" id="applyForm" class="form-content">
        
        <div class="header-grid">
            <div class="field-box">
                <label>Academic Class</label>
                <select name="student_class" id="classSelector" required onchange="handleClassChange()">
                    <option value="" disabled selected>Select Class</option>
                    <option value="5">Class 5</option>
                    <option value="8">Class 8</option>
                    <option value="9">Class 9</option>
                    <option value="10">Class 10</option>
                </select>
            </div>
            <div class="field-box">
                <label>Examination Center</label>
                <select name="center_code" id="centerSelector" required>
                    <option value="">Choose Class First</option>
                </select>
            </div>
        </div>

        <div class="category-wrapper">
            <div class="category-card">
                <span style="font-weight: 700; font-size: 12px; margin-right: 20px; color: var(--navy);">INSTITUTE CATEGORY:</span>
                <label style="margin-right: 20px; cursor: pointer;"><input type="radio" name="category" value="Madrasah" required> Madrasah</label>
                <label style="cursor: pointer;"><input type="radio" name="category" value="School"> School</label>
            </div>
        </div>

        <div class="section-title">Primary Information (Identity)</div>
        <div class="grid-2">
            <div class="col">
                <div class="field-box"><label>Name (English)</label><input type="text" name="name_en" required placeholder="Full Name in Block Letters"></div>
                <div class="field-box"><label>Father (English)</label><input type="text" name="father_en" required></div>
                <div class="field-box"><label>Mother (English)</label><input type="text" name="mother_en" required></div>
                <div class="field-box"><label>Institute (English)</label><input type="text" name="institute_en" required></div>
                <div class="field-box"><label>Date of Birth</label><input type="date" name="dob" required></div>
                <div class="field-box">
                    <label>Gender</label>
                    <div style="display:flex; align-items:center; gap:20px; padding-left:15px; font-size: 14px;">
                        <input type="radio" name="gender" value="Male"> Male <input type="radio" name="gender" value="Female"> Female
                    </div>
                </div>
            </div>
            
            <div class="col">
                <div class="field-box"><label>শিক্ষার্থীর নাম (বাংলা)</label><input type="text" name="name_bn"></div>
                <div class="field-box"><label>পিতার নাম (বাংলা)</label><input type="text" name="father_bn"></div>
                <div class="field-box"><label>মাতার নাম (বাংলা)</label><input type="text" name="mother_bn"></div>
                <div class="field-box"><label>প্রতিষ্ঠানের নাম (বাংলা)</label><input type="text" name="institute_bn"></div>
                
                <div class="field-box hidden" id="sectionBox">
                    <label>Academic Group</label>
                    <select name="section">
                        <option value="">Select Group (For 9/10)</option>
                        <option value="Science">Science</option>
                        <option value="Humanities">Humanities</option>
                        <option value="Commerce">Commerce</option>
                    </select>
                </div>
                
                <div class="field-box"><label>Religion</label><input type="text" name="religion" placeholder="e.g. Islam"></div>
                <div class="field-box"><label>Active Mobile</label><input type="tel" name="mobile" required placeholder="017XXXXXXXX"></div>
            </div>
        </div>

        <div class="grid-2">
            <div>
                <div class="section-title">Present Residence</div>
                <div class="field-box"><label>Village/House</label><input type="text" name="pre_v" id="pre_v"></div>
                <div class="field-box"><label>Post Office</label><input type="text" name="pre_p" id="pre_p"></div>
                <div class="field-box"><label>Upazila/Thana</label><input type="text" name="pre_t" id="pre_t"></div>
                <div class="field-box"><label>District</label><input type="text" name="pre_d" id="pre_d"></div>
            </div>
            <div>
                <div class="section-title">
                    Permanent Residence 
                    <span style="float: right; font-size: 10px; text-transform: none; color: #555;">
                        <input type="checkbox" onclick="copyAddress(this)"> Same as Present
                    </span>
                </div>
                <div class="field-box"><label>Village/House</label><input type="text" name="per_v" id="per_v"></div>
                <div class="field-box"><label>Post Office</label><input type="text" name="per_p" id="per_p"></div>
                <div class="field-box"><label>Upazila/Thana</label><input type="text" name="per_t" id="per_t"></div>
                <div class="field-box"><label>District</label><input type="text" name="per_d" id="per_d"></div>
            </div>
        </div>

        <div class="section-title">Document Uploads</div>
        <div class="upload-section">
            <label class="upload-box" id="pLabel">
                <strong>ATTACH PHOTO</strong>
                <span class="size-hint">Required: 300x350 Pixels</span>
                <input type="file" name="photo" hidden required onchange="validateImg(this, 300, 350, 'pLabel')">
            </label>
            <label class="upload-box" id="sLabel">
                <strong>ATTACH SIGNATURE</strong>
                <span class="size-hint">Required: 300x80 Pixels</span>
                <input type="file" name="signature" hidden required onchange="validateImg(this, 300, 80, 'sLabel')">
            </label>
        </div>

        <div style="margin-top: 40px; border-top: 1px solid #eee; padding-top: 20px; overflow: hidden;">
            <button type="submit" class="btn-submit">Submit Application</button>
        </div>
    </form>
</div>

<script>
    function handleClassChange() {
        const cls = document.getElementById('classSelector').value;
        const center = document.getElementById('centerSelector');
        const sBox = document.getElementById('sectionBox');

        if(cls === "9" || cls === "10") sBox.classList.remove('hidden');
        else sBox.classList.add('hidden');

        center.innerHTML = '<option value="">Select Center Code</option>';
        let list = (cls === "5" || cls === "8") ? ["C-101 (Primary Wing)", "C-102 (Primary Wing)"] : ["C-201 (Secondary Wing)", "C-202 (Secondary Wing)"];
        list.forEach(item => {
            let opt = document.createElement('option');
            opt.value = item; opt.innerText = item;
            center.appendChild(opt);
        });
    }

    function validateImg(input, w, h, labelId) {
        const file = input.files[0];
        const img = new Image();
        img.src = URL.createObjectURL(file);
        img.onload = function() {
            if(this.width !== w || this.height !== h) {
                alert(`Professional Validation Error: Image must be exactly ${w}x${h} pixels.`);
                input.value = "";
            } else {
                const box = document.getElementById(labelId);
                box.style.background = "#E8F8F5";
                box.style.borderColor = "#1ABC9C";
                box.innerHTML = "<strong>✓ DOCUMENT ATTACHED</strong><span style='color:#1ABC9C; font-size:11px;'>Validated Successfully</span>";
            }
        };
    }

    function copyAddress(cb) {
        if(cb.checked) {
            document.getElementById('per_v').value = document.getElementById('pre_v').value;
            document.getElementById('per_p').value = document.getElementById('pre_p').value;
            document.getElementById('per_t').value = document.getElementById('pre_t').value;
            document.getElementById('per_d').value = document.getElementById('pre_d').value;
        }
    }
</script>
{% endblock %}
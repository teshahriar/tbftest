{% extends "base.html" %}

{% block title %}‡¶¨‡ßÉ‡¶§‡ßç‡¶§‡¶ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶® | TBF{% endblock %}

{% block extra_css %}
<style>
    /* Global Container */
    .container { max-width: 700px; margin: 20px auto; padding: 0 15px; }
    
    /* Search Box Styles */
    .search-section { 
        background: #fff; padding: 30px 20px; border-radius: 15px; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.05); text-align: center; 
        border: 1px solid #e2e8f0;
    }
    .search-group { margin-top: 20px; width: 100%; }
    .search-input { 
        width: 100%; max-width: 400px; padding: 12px; border: 2px solid #cbd5e1; 
        border-radius: 10px; font-size: 18px; font-weight: 600; outline: none;
        transition: 0.3s; text-align: center; box-sizing: border-box;
    }
    .search-input:focus { border-color: #10b981; box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1); }

    /* The Buttons */
    .btn-submit { 
        background: #1e293b; color: #fff; border: none; padding: 14px 30px; 
        border-radius: 10px; font-size: 16px; font-weight: 700; cursor: pointer;
        margin-top: 15px; transition: 0.2s; width: 100%; max-width: 400px;
        text-transform: uppercase;
    }
    .btn-submit:hover { background: #334155; transform: translateY(-2px); }

    /* Result Card Styles */
    .result-card { 
        background: #fff; margin-top: 30px; border-radius: 20px; overflow: hidden; 
        box-shadow: 0 20px 40px rgba(0,0,0,0.1); border: 1px solid #e2e8f0;
        animation: fadeInUp 0.5s ease-out;
    }
    .result-header { background: #1e293b; color: white; padding: 25px; text-align: center; }
    .grade-text { font-size: 22px; font-weight: 800; color: #fbbf24; margin-top: 10px; }

    /* Score Grid - Mobile Friendly */
    .score-row { 
        display: grid; 
        grid-template-columns: repeat(2, 1fr); 
        gap: 12px; 
        padding: 20px; 
        background: #f8fafc; 
    }
    .score-box { background: white; padding: 15px; border-radius: 12px; text-align: center; border: 1px solid #edf2f7; }
    .score-box small { color: #64748b; font-weight: 700; text-transform: uppercase; font-size: 10px; display: block; margin-bottom: 5px; }
    .score-box span { font-size: 20px; font-weight: 800; color: #1e293b; }

    /* Total Marks Bar */
    .total-bar {
        margin-top: 15px; padding: 20px; background: #10b981; color: white; 
        border-radius: 12px; display: flex; justify-content: space-between; align-items: center;
    }

    /* Error Guide */
    .guide-card { background: #fff1f2; border: 1px solid #fecdd3; padding: 25px; border-radius: 15px; margin-top: 25px; color: #9f1239; }

    /* Responsive Adjustments */
    @media (max-width: 480px) {
        .search-section { padding: 25px 15px; }
        .result-header h2 { font-size: 22px; }
        .grade-text { font-size: 18px; }
        .score-row { grid-template-columns: 1fr; } /* ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá ‡¶è‡¶ï ‡¶ï‡¶≤‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶∏ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá */
        .total-bar { flex-direction: column; text-align: center; gap: 10px; }
        .score-box span { font-size: 18px; }
    }

    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    
    @media print {
        .no-print { display: none !important; }
        .result-card { margin-top: 0; box-shadow: none; border: 2px solid #000; border-radius: 0; }
        .container { max-width: 100%; padding: 0; }
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="search-section no-print">
        <div style="font-size: 35px; color: #10b981; margin-bottom: 10px;"></div>
        <h1 style="margin:0; font-size: 24px; color: #1e293b;">‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶® ‡ß®‡ß¶‡ß®‡ß¨</h1>
        <p style="color: #64748b; font-size: 14px;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶∞‡ßã‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡¶ü‡¶ø ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        
        <form method="POST" class="search-group">
            <input type="number" name="roll_no" class="search-input" placeholder="‡¶∞‡ßã‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required autofocus>
            <br>
            <button type="submit" class="btn-submit">‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        </form>
    </div>

    {% if searched %}
        {% if student %}
            <div class="result-card">
                <div class="result-header">
                    <p style="text-transform: uppercase; letter-spacing: 2px; font-size: 10px; opacity: 0.8; margin-bottom: 5px;">Academic Marksheet</p>
                    <h2 style="margin:0;">{{ student.name_en }}</h2>
                    <p style="font-size: 14px; margin: 8px 0 0; opacity: 0.9;">
                        ‡¶∞‡ßã‡¶≤: <b>{{ student.roll_no }}</b> &nbsp;|&nbsp; ‡¶∂‡ßç‡¶∞‡ßá‡¶£‡¶ø: <b>{{ student.student_class }}</b>
                    </p>
                    <div class="grade-text">
                        {% if student.scholarship_grade == 'Talentpool' %}üèÜ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶ü‡¶™‡ßÅ‡¶≤ ‡¶Æ‡ßá‡¶ß‡¶æ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ
                        {% elif student.scholarship_grade == 'General' %}‚≠ê ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶Æ‡ßá‡¶ß‡¶æ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ
                        {% elif student.scholarship_grade == 'Suveccha' %}üéÅ ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞
                        {% else %}‚ú® ‡¶∏‡¶´‡¶≤‡¶§‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶â‡¶§‡ßç‡¶§‡ßÄ‡¶∞‡ßç‡¶£{% endif %}
                    </div>
                </div>

                <div style="padding: 20px;">
                    <div style="text-align: center; margin-bottom: 25px;">
                        <span style="font-size: 10px; color: #94a3b8; text-transform: uppercase; font-weight: 800;">National Merit Rank</span><br>
                        <span style="font-size: 40px; font-weight: 900; color: #1e293b;">#{{ rank }}</span>
                    </div>

                    <div class="score-row">
                        <div class="score-box"><small>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</small><span>{{ student.marks_bn }}</span></div>
                        <div class="score-box"><small>‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø</small><span>{{ student.marks_en }}</span></div>
                        <div class="score-box"><small>‡¶ó‡¶£‡¶ø‡¶§</small><span>{{ student.marks_math }}</span></div>
                        <div class="score-box"><small>‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ú‡ßç‡¶û‡¶æ‡¶®</small><span>{{ student.marks_gk }}</span></div>
                    </div>

                    <div class="total-bar">
                        <span style="font-weight: 700; letter-spacing: 1px;">‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ (Total)</span>
                        <span style="font-size: 28px; font-weight: 900;">{{ student.total_marks }}</span>
                    </div>

                    <p style="text-align: center; font-size: 11px; color: #94a3b8; margin-top: 25px; line-height: 1.5;">
                        ‡¶è‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶ï‡¶™‡¶ø ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡•§ <br> 
                        ‡¶Ö‡¶´‡¶ø‡¶∏‡¶ø‡ßü‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∞‡ßç‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶ü ‡¶ì ‡¶Æ‡ßÇ‡¶≤ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶∂‡¶ø‡¶ü ‡¶´‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶∂‡¶® ‡¶Ö‡¶´‡¶ø‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§
                    </p>
                </div>
            </div>

            <button onclick="window.print()" class="btn-submit no-print" style="background: #10b981; margin-top: 15px; max-width: none;">
                üì• ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡¶∂‡¶ø‡¶ü ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶® (PDF)
            </button>

        {% else %}
            <div class="guide-card">
                <h3 style="margin-top:0;"><i class="fas fa-exclamation-triangle"></i> ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø</h3>
                <p style="font-size: 14px;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶∞‡ßã‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá ‡¶®‡ßá‡¶á‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∑‡ßü‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®:</p>
                <ul style="font-size: 13px; line-height: 1.8; padding-left: 20px;">
                    <li>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶∏‡¶†‡¶ø‡¶ï <b>‡¶∞‡ßã‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡¶ü‡¶ø</b> ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</li>
                    <li>‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá (‡¶Ø‡ßá‡¶Æ‡¶®: 12345) ‡¶∞‡ßã‡¶≤ ‡¶≤‡¶ø‡¶ñ‡ßá‡¶õ‡ßá‡¶®‡•§</li>
                    <li>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ï‡ßá‡ßü‡¶æ ‡¶´‡¶ø ‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶∏‡ßç‡¶•‡¶ó‡¶ø‡¶§ ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§</li>
                </ul>
                <hr style="border: 0; border-top: 1px solid #fecdd3; margin: 15px 0;">
                <p style="font-size: 13px;"><b>‡¶∏‡¶π‡¶Ø‡ßã‡¶ó‡¶ø‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø:</b> ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞ ‡¶∏‡¶ö‡¶ø‡¶¨‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶π‡¶ü‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                <a href="/results" style="color: #9f1239; font-weight: 800; text-decoration: none; font-size: 14px;">
                    üîÑ ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡ßü ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®
                </a>
            </div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
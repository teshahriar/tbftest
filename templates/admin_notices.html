{% extends "base.html" %}

{% block title %}Manage Notices | Admin{% endblock %}

{% block extra_css %}
<style>
    .admin-box { 
        background: white; 
        padding: 30px; 
        border-radius: 10px; 
        box-shadow: 0 4px 10px rgba(0,0,0,0.1); 
    }
    h2 { color: var(--navy); margin-top: 0; }
    .input-group { margin-bottom: 15px; }
    label { font-weight: bold; display: block; margin-bottom: 5px; color: #555; }
    
    input, textarea, select { 
        width: 100%; 
        padding: 12px; 
        margin-top: 5px; 
        border: 1px solid #ddd; 
        border-radius: 5px; 
        box-sizing: border-box; 
    }
    
    .btn-add { 
        background: #28a745; 
        color: white; 
        border: none; 
        padding: 12px 25px; 
        cursor: pointer; 
        border-radius: 5px; 
        font-weight: bold;
        width: 100%;
        font-size: 1rem;
    }
    .btn-add:hover { background: #218838; }
    
    .notice-list { margin-top: 40px; border-top: 2px solid #eee; padding-top: 20px; }
    .notice-item { 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        padding: 15px; 
        background: #fdfdfd;
        border: 1px solid #eee;
        border-radius: 8px;
        margin-bottom: 10px;
    }
    .btn-delete { 
        color: #dc3545; 
        text-decoration: none; 
        font-weight: bold; 
        border: 1px solid #dc3545; 
        padding: 6px 12px; 
        border-radius: 4px; 
        transition: 0.3s;
    }
    .btn-delete:hover { background: #dc3545; color: white; }
</style>
{% endblock %}

{% block content %}
<div class="admin-box">
    <div style="margin-bottom: 20px;">
        <a href="/" style="text-decoration: none; color: var(--navy); font-weight: bold;">‚Üê Back to Home</a>
    </div>

    <h2>Add New Notice</h2>
    <form action="/admin/add_notice" method="POST">
        <div class="input-group">
            <label>Notice Title</label>
            <input type="text" name="title" placeholder="e.g. Exam Date Announced" required>
        </div>
        
        <div class="input-group">
            <label>Category</label>
            <select name="category">
                <option value="Admission">Admission</option>
                <option value="Exam">Exam</option>
                <option value="Urgent">Urgent</option>
                <option value="General">General</option>
            </select>
        </div>
        
        <div class="input-group">
            <label>Content</label>
            <textarea name="content" rows="4" placeholder="Write notice details here..." required></textarea>
        </div>
        
        <button type="submit" class="btn-add">Post Notice to Portal</button>
    </form>

    <div class="notice-list">
        <h3>Current Active Notices</h3>
        {% if notices %}
            {% for notice in notices %}
            <div class="notice-item">
                <div>
                    <span style="display: block; font-size: 0.8rem; color: #888;">{{ notice.date }} | {{ notice.category }}</span>
                    <strong style="font-size: 1.1rem; color: #333;">{{ notice.title }}</strong>
                </div>
                <a href="/admin/delete_notice/{{ notice._id }}" class="btn-delete" onclick="return confirm('Are you sure you want to delete this notice?')">Delete</a>
            </div>
            {% endfor %}
        {% else %}
            <p style="color: #888; text-align: center;">No notices found in database.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
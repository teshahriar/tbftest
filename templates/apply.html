{% extends "base.html" %}
{% block content %}
<style>
    :root { 
        --navy: #1B2631; --paper-white: #FFFFFF; --accent-crimson: #922B21; 
        --border-gold: #D4AC0D; --bg-soft: #F4F6F7; --input-border: #ABB2B9;
    }
    
    body { background-color: var(--bg-soft); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 0; }

    .form-container { 
        max-width: 1000px; margin: 20px auto; background: var(--paper-white); 
        border: 1px solid var(--input-border); box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        border-radius: 8px; overflow: hidden;
    }

    .form-banner { background: var(--navy); color: white; padding: 25px 15px; text-align: center; border-bottom: 4px solid var(--accent-crimson); }
    .form-banner h2 { margin: 0; font-size: clamp(1.2rem, 5vw, 1.6rem); text-transform: uppercase; }
    
    .form-content { padding: clamp(15px, 4vw, 30px); }

    /* Grid Layout */
    .grid-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 15px; }

    .field-box { display: flex; border: 1px solid var(--input-border); background: #fff; min-height: 45px; transition: 0.3s; }
    .field-box:focus-within { border-color: var(--navy); box-shadow: 0 0 5px rgba(27, 38, 49, 0.2); }
    
    .field-box label { 
        background: var(--navy); color: #fff; padding: 0 12px; min-width: 140px; 
        display: flex; align-items: center; font-size: 11px; font-weight: 600; text-transform: uppercase;
    }
    .field-box input, .field-box select { flex: 1; border: none; padding: 10px; outline: none; font-size: 14px; width: 100%; }

    .section-title { 
        background: #EBEDEF; color: var(--navy); padding: 12px 15px; font-weight: 700; font-size: 13px;
        text-transform: uppercase; border-left: 5px solid var(--accent-crimson); margin: 30px 0 15px;
    }

    /* Upload Section */
    .upload-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
    .upload-box { 
        background: #fff; border: 2px dashed var(--input-border); padding: 15px; 
        text-align: center; cursor: pointer; border-radius: 5px; transition: 0.3s;
    }
    .preview-img { max-width: 100%; max-height: 150px; margin-top: 10px; display: none; border: 1px solid #ddd; }

    .btn-submit { 
        background: var(--accent-crimson); color: white; padding: 15px 50px; border: none; 
        font-weight: 700; border-radius: 5px; cursor: pointer; width: 100%; max-width: 300px;
        text-transform: uppercase; transition: 0.3s; display: block; margin: 40px 0 0 auto;
    }
    .btn-submit:hover { background: var(--navy); transform: translateY(-2px); }

    @media (max-width: 600px) {
        .field-box { flex-direction: column; }
        .field-box label { padding: 8px 12px; min-width: 100%; }
    }
</style>

<div class="form-container">
    <div class="form-banner">
        <h2>Scholarship Registration Form - 2026</h2>
        <p>The Brilliants Foundation, Bogura</p>
    </div>

    <form action="{{ url_for('apply') }}" method="POST" enctype="multipart/form-data" id="applyForm" class="form-content">
        
        <div class="grid-row">
            <div class="field-box">
                <label>Academic Class</label>
                <select name="student_class" id="classSelector" required onchange="handleClassChange()">
                    <option value="" disabled selected>Select Class</option>
                    <option value="5">Class 5</option>
                    <option value="8">Class 8</option>
                    <option value="9">Class 9</option>
                    <option value="10">Class 10</option>
                </select>
            </div>
            <div class="field-box">
                <label>Examination Center</label>
                <select name="center_code" id="centerSelector" required>
                    <option value="">Choose Class First</option>
                </select>
            </div>
        </div>

        <div class="section-title">Personal Information</div>
        <div class="grid-row">
            <div class="field-box"><label>Name (English)</label><input type="text" name="name_en" required></div>
            <div class="field-box"><label>শিক্ষার্থীর নাম (বাংলা)</label><input type="text" name="name_bn"></div>
        </div>
        <div class="grid-row">
            <div class="field-box"><label>Father's Name</label><input type="text" name="father_en" required></div>
            <div class="field-box"><label>Mother's Name</label><input type="text" name="mother_bn" placeholder="মাতার নাম বাংলায়" required></div>
        </div>
        <div class="grid-row">
            <div class="field-box"><label>Mobile Number</label><input type="tel" name="mobile" required placeholder="017XXXXXXXX"></div>
            <div class="field-box"><label>Date of Birth</label><input type="date" name="dob" required></div>
        </div>

        <div class="section-title">Institutional Information</div>
        <div class="grid-row">
            <div class="field-box" style="grid-column: 1 / -1;">
                <label>Institution Name</label>
                <input type="text" name="institute_en" placeholder="Enter Full Name of School/Madrasah" required>
            </div>
        </div>

        <div class="grid-row">
            <div>
                <div class="section-title">Present Address</div>
                <div class="field-box"><label>Village/House</label><input type="text" name="pre_v" id="pre_v" required></div>
                <div class="field-box"><label>Post Office</label><input type="text" name="pre_p" id="pre_p" required></div>
                <div class="field-box"><label>Upazila</label><input type="text" name="pre_t" id="pre_t" required></div>
                <div class="field-box"><label>District</label><input type="text" name="pre_d" id="pre_d" required></div>
            </div>

            <div>
                <div class="section-title">
                    Permanent Address
                    <label style="font-size: 10px; text-transform: none; cursor: pointer; font-weight: normal;">
                        <input type="checkbox" onclick="copyAddress(this)"> Same as Present
                    </label>
                </div>
                <div class="field-box"><label>Village/House</label><input type="text" name="per_v" id="per_v" required></div>
                <div class="field-box"><label>Post Office</label><input type="text" name="per_p" id="per_p" required></div>
                <div class="field-box"><label>Upazila</label><input type="text" name="per_t" id="per_t" required></div>
                <div class="field-box"><label>District</label><input type="text" name="per_d" id="per_d" required></div>
            </div>
        </div>

        <div class="section-title">Security & Media</div>
        <div class="grid-row">
            <div class="field-box"><label>Password</label><input type="password" name="password" required></div>
            <div class="field-box"><label>Confirm</label><input type="password" name="confirm_password" required></div>
        </div>

        <div class="upload-grid">
            <div class="upload-box">
                <strong>PHOTO (Any size)</strong>
                <input type="file" name="photo" required onchange="previewFile(this, 'pPreview')">
                <img id="pPreview" class="preview-img">
            </div>
            <div class="upload-box">
                <strong>SIGNATURE (Any size)</strong>
                <input type="file" name="signature" required onchange="previewFile(this, 'sPreview')">
                <img id="sPreview" class="preview-img">
            </div>
        </div>

        <button type="submit" class="btn-submit">Submit Application</button>
    </form>
</div>

<script>
    function handleClassChange() {
        const cls = document.getElementById('classSelector').value;
        const center = document.getElementById('centerSelector');
        center.innerHTML = '<option value="">Select Center Code</option>';
        let list = (cls === "5" || cls === "8") ? ["C-101", "C-102"] : ["C-201", "C-202"];
        list.forEach(item => {
            let opt = document.createElement('option');
            opt.value = item; opt.innerText = item;
            center.appendChild(opt);
        });
    }

    function copyAddress(cb) {
        const fields = ['v', 'p', 't', 'd'];
        fields.forEach(f => {
            document.getElementById('per_' + f).value = cb.checked ? document.getElementById('pre_' + f).value : "";
        });
    }

    function previewFile(input, previewId) {
        const preview = document.getElementById(previewId);
        const file = input.files[0];
        const reader = new FileReader();
        reader.onloadend = function () {
            preview.src = reader.result;
            preview.style.display = "block";
        }
        if (file) { reader.readAsDataURL(file); }
    }
</script>
{% endblock %}